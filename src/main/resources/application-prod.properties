server.port=8080

#datasource
##spring.datasource.url=jdbc:mysql://root:${MYSQL_ROOT_PASSWORD}:18887/railway?createDatabaseIfNotExist=true&useSSL=true
#MYSQL_PUBLIC_URL=jdbc:mysql://${RAILWAY_TCP_PROXY_DOMAIN}:${RAILWAY_TCP_PROXY_PORT}/${MYSQLDATABASE}?createDatabaseIfNotExist=true&useSSL=true
#spring.datasource.username=${MYSQLUSER}
#spring.datasource.password=${MYSQLPASSWORD}
#spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.jpa.generate-ddl=true
# Disable SQL logging in production
spring.jpa.show-sql=false

# HikariCP Connection Pool Configuration
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.pool-name=MatrimonyHikariPool
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate Performance Settings
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.default_batch_fetch_size=16

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

spring.jpa.hibernate.ddl-auto=update

spring.main.allow-circular-references=true

spring.mail.username=""
spring.mail.password=""
spring.mail.host=smtp.gmail.com
spring.mail.port=465
spring.mail.properties.mail.smtp.ssl.enable=true
spring.mail.properties.mail.smtp.auth=true

# Swagger properties
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/v3/api-docs

# Rate limiting settings
app.rate-limiting.enabled=true
app.rate-limiting.limit-for-period=100
app.rate-limiting.refresh-period=60
app.rate-limiting.timeout-duration=300

spring.task.scheduling.time-zone=Asia/Kolkata

# Password reset URL
app.url.password-reset=http://localhost:3000/reset-password

# CORS configuration
app.cors.allowed-origins=http://localhost:5173,https://matrimony-v1.netlify.app,https://matrimon1.netlify.app

# JWT Configuration (Production)
# SECURITY: Device fingerprinting enabled for token theft protection
# IMPORTANT: Fingerprint uses ONLY browser characteristics (User-Agent, Accept-Language, Accept-Encoding)
# Does NOT use IP address - safe for mobile users, WiFi switching, VPN users
# Users can still use multiple devices - each device needs separate login (normal security behavior)
jwt.secret=${JWT_SECRET}
jwt.device-fingerprinting-enabled=true
jwt.not-before=0
jwt.allowed-clock-skew-seconds=5
jwt.expiration=7200
jwt.enforce-single-session=true
jwt.max-active-sessions=3

# Encryption settings (Production)
# CRITICAL: Replace these with environment variables before deploying!
app.encryption.secret-key= ${SECRET_KEY}
app.encryption.legacy-keys=${LEGACY_KEY}
app.encryption.debug=false

# SSL configuration
app.ssl.enabled=false
server.ssl.enabled=false

# Exam Result Scheduler Configuration
app.scheduler.exam-results=0 */5 * * * *

logging.level.root=WARN

# Spring Framework - only errors
logging.level.org.springframework=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.springframework.boot=INFO

# Hibernate/JPA - only errors
logging.level.org.hibernate=WARN
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql=OFF
logging.level.com.zaxxer.hikari=WARN

# Application logging - INFO level for important events
logging.level.com.spring.jwt=INFO

# Security events - WARN only (log failures, not successes)
logging.level.com.spring.jwt.config.filter=WARN
logging.level.com.spring.jwt.exception=WARN

# Disable noisy libraries
logging.level.io.swagger=WARN
logging.level.springfox=WARN
logging.level.org.apache=WARN
logging.level.io.netty=WARN

# Log pattern - concise for production
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# File logging for production (optional - uncomment if needed)
# logging.file.name=/var/log/matrimony/app.log
# logging.file.max-size=50MB
# logging.file.max-history=30
# logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
